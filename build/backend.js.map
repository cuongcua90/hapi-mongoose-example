{"version":3,"sources":["webpack:///webpack/bootstrap 58327c5d5d364254866d","webpack:///./server.js","webpack:///external \"fs\"","webpack:///external \"hapi\"","webpack:///external \"mongoose\"","webpack:///./src/models/question.js","webpack:///./src/config/routes.js","webpack:///./src/controllers/questions.js","webpack:///external \"lodash\""],"names":[],"mappings":"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","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 58327c5d5d364254866d\n **/","'use strict';\n\nimport fs from 'fs';\nimport Hapi from 'hapi';\nimport mongoose from 'mongoose';\n\nconst server = new Hapi.Server();\nconst port = process.env.PORT || 3000;\nconst dbURI = process.env.dbURI || 'mongodb://localhost/cuongcua';\n\n// connect mongo\nmongoose.connect(dbURI);\n\n// When successfully connected\nmongoose.connection.on('connected', function () {\n  console.log('Mongoose default connection open to ' + dbURI);\n});\n\n// If the connection throws an error\nmongoose.connection.on('error',function (err) {\n  console.log('Mongoose default connection error: ' + err);\n});\n\n// When the connection is disconnected\nmongoose.connection.on('disconnected', function () {\n  console.log('Mongoose default connection disconnected');\n});\n\n// When the connection is open\nmongoose.connection.on('open', function () {\n  console.log('Mongoose default connection is open');\n});\n\n\n// bootstrap models\nrequire('./src/models/question')\n\nserver.connection({\n  port: port,\n  routes: {\n    validate: {\n      options: {\n        allowUnknown: true,\n        stripUnknown: true\n      }\n    }\n  }\n});\n\n// routes\nconst routes = require('./src/config/routes');\n\nfor (var route in routes) {\n  server.route(routes[route]);\n}\n\n\nserver.start(() => {\n  console.log('Server running at: ', server.info.uri);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./server.js\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"hapi\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"hapi\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"mongoose\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose\"\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nimport mongoose, { Schema } from 'mongoose';\n\n/**\n * Question Schema\n */\nconst QuestionSchema = new Schema({\n  title: String,\n  type: String,\n  choices: Array,\n  answers: [{\n    content: String,\n    ip: String,\n    author: Object,\n    createdAt: { type: Date, default: Date.now }\n  }],\n  order: Number,\n  isActive: { type: Boolean, default: true },\n  createdAt: { type: Date, default: Date.now },\n});\n\n/**\n * Validations\n */\n\nQuestionSchema.path('title').required(true, 'Question title cannot be blank');\n\nQuestionSchema.methods = {\n  addAnswer: function(answer, cb) {\n    this.answers.push(answer);\n    this.save(cb);\n  }\n}\n\nQuestionSchema.statics = {\n  load: function(id, cb) {\n    this.findOne({ _id: id })\n      .exec(cb)\n  },\n\n  list: function(options, cb) {\n    const criteria = options.criteria || {};\n\n    this.find(criteria)\n      .populate('')\n      .sort({ 'order': -1, 'createdAt': -1 })\n      .exec(cb)\n  }\n}\n\nmongoose.model('question', QuestionSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/question.js\n **/","import questions from '../controllers/questions';\n\nexport default [\n  // Get the list of questions\n  {\n    method: 'GET',\n    path: '/questions',\n    handler: questions.list\n  },\n  // Create new question\n  {\n    method: 'POST',\n    path: '/questions',\n    handler: questions.create\n  },\n  // Update a question\n  {\n    method: 'PUT',\n    path: '/questions/{questionId}',\n    handler: questions.update,\n    config: {\n      pre: [\n        { method: questions.load, assign: 'question' }\n      ]\n    }\n  },\n  // Post an answer\n  {\n    method: 'POST',\n    path: '/questions/{questionId}/answers',\n    handler: questions.addAnswer,\n    config: {\n      pre: [\n        { method: questions.load, assign: 'question' }\n      ]\n    }\n  }\n]\n\n\n/** WEBPACK FOOTER **\n ** ./src/config/routes.js\n **/","'use strict';\n\nimport _ from 'lodash';\nimport mongoose from 'mongoose';\n\nconst Question = mongoose.model('question');\n\nconst handleError = (reply, err) => {\n  reply(err.message).code(400);\n};\n\nexport default {\n\n  load: (request, reply) => {\n    const id = request.params.questionId;\n\n    Question.load(id, (err, result) => {\n      if (err) {\n        return reply(err);\n      }\n\n      return reply(result);\n    });\n  },\n\n  // Get list\n  list: (request, reply) => {\n    const { isActive } = request.query;\n    let options = {};\n\n    if (!_.isUndefined(isActive)) {\n      options.criteria = { isActive };\n    }\n\n    Question.list(options, function(err, questions){\n      if (err) {\n        return handleError(reply, err.message);\n      }\n\n      reply(JSON.stringify(questions));\n    });\n  },\n\n  // Create new question\n  create: (request, reply) => {\n    const question = new Question(request.payload);\n\n    question.save((err, result) => {\n      if (err) {\n        return handleError(reply, err);\n      }\n\n      reply(JSON.stringify(result));\n    });\n  },\n\n  // update a question\n  update: (request, reply) => {\n    let { question } = request.pre;\n\n    _.assign(question, request.payload);\n\n    question.save((err, result)=>{\n      if (err) {\n        return handleError(reply, err);\n      }\n\n      reply(JSON.stringify(result));\n    });\n  },\n\n  // answer a question\n  addAnswer: (request, reply) => {\n\n    let { payload, pre: { question } } = request;\n    const { info: { remoteAddress } } = request;\n\n    _.assign(payload, { ip: remoteAddress });\n\n    question.addAnswer(payload, (err, result) => {\n      if (err) {\n        return handleError(reply, err);\n      }\n\n      reply(JSON.stringify(result));\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/questions.js\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"backend.js"}